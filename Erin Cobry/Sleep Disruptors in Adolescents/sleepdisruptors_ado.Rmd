---
title: ""
author: "Casey Sakamoto & Laura Pyle"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    number_sections: yes
    toc: yes
    toc_depth: 5
    toc_float: yes
---

```{r setup, include=FALSE}
library(arsenal)
library(tidyverse)
library(performance)
library(knitr)
library(table1)

knitr::opts_chunk$set(echo = FALSE)
if(Sys.info()["sysname"] == "Windows"){
  home_dir = "S:/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/BDC/Projects/Erin Cobry/Sleep Disruptors in t1d Adolescents"
} else if (Sys.info()["sysname"] == "Linux"){
  home_dir = "~/UCD/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/BDC/Projects"
} else if (Sys.info()["sysname"] == "Darwin"){
  home_dir = "/Volumes/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/BDC/Projects"
}
knitr::opts_knit$set(root.dir = home_dir)
rm(home_dir)
```

```{r data step}
# upload data
sleep_disruptors = read.csv("S:/Laura/BDC/Projects/Erin Cobry/Sleep Disruptors in t1d Adolescents/Data/SleepDisruptorsInAdo_DATA_2022-11-29_1035.csv")

# for table1 right now we need age, gender, race, a1c and maybe therapy
df = sleep_disruptors %>% select(record_id , redcap_event_name, season, age, parent_gender, race___1:race___8, hba1c, diabetesduration, insulinmethod, currenthcltech, current_cgm_use) %>% filter(redcap_event_name == "enrollment_arm_1")

df_a1c = sleep_disruptors %>% select(record_id , hba1c, diabetesduration, dxdate, enrollementdate)

```


ADA 2023 abstract plan

Summer vs school sleep and glycemic measurements in adolescents with type 1 diabetes

Summer: 10 participants (Redcap “Season” variable [summer] in enrollment instrument) 
School: 10+ participants (RedCap “Season” variable [fall and spring] in enrollment instrument)

Demographics:
No diabetes duration/ diagnosis dates for most subj
only 10 hba1c values

Incomplete season values (only 1's)

Variables:
Sleep measures (RedCap wrist actigraphy variable)
Total sleep
Sleep latency
Sleep efficiency
WASO

Diabetes measures (RedCap Pump & CGM Glycemic Data OR Injection & BG Meter Glycemic Data Instruments [depending on the insulin method for each patient])
Time in range (70-180)
Time hypoglycemic (<70 – combine <54 and 55-69)
Time hyperglycemic (>180 – combine 181-250 and >250)
HCL use (for those on HCL, if RedCap value blank do not include)
Sensor use (for those on sensor, if RedCap value blank do not include)
