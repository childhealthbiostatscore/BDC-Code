---
title: "TESS ADA 2022"
author: "Tim Vigers & Laura Pyle"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  html_document:
    number_sections: yes
    toc: yes
    toc_depth: 2
    toc_float: yes
---

```{r setup, include=FALSE}
library(arsenal)
library(tidyverse)
library(performance)
library(knitr)
library(lubridate)
library(AGD)
knitr::opts_chunk$set(echo = FALSE)
if(Sys.info()["sysname"] == "Windows"){
  home_dir = "B:/Projects"
} else if (Sys.info()["sysname"] == "Linux"){
  home_dir = "~/UCD/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/BDC/Projects"
} else if (Sys.info()["sysname"] == "Darwin"){
  home_dir = "/Volumes/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/BDC/Projects"
}
knitr::opts_knit$set(root.dir = home_dir)
```

```{r data cleaning}
# Import demographics
subject = read.csv("./Brigitte Frohnert/TESS/Data_Raw/Tess Subject Information.csv",
                   stringsAsFactors = F)
# Age 
subject$Age = as.numeric(difftime(mdy(subject$Baseline.visit.date), 
                                  mdy_hm(subject$Date.of.Birth)))/365.25
# BMI z score
subject$Gender = as.factor(subject$Gender)
levels(subject$Gender) = c("F","M")
subject$BMI = subject$Weight..kg. / ((subject$Height..cm./100)^2)
subject$BMIz = y2z(subject$BMI,x=subject$Age, sex=subject$Gender, ref=nl4.bmi)
# CGM and OGTT data at baseline
cgm = read.csv("./Brigitte Frohnert/TESS/Data_Raw/CGM data.csv",stringsAsFactors = F)
cgm = cgm[cgm$Visit == "Baseline",]
ogtt = read.csv("./Brigitte Frohnert/TESS/Data_Raw/OGTT data.csv",stringsAsFactors = F)
ogtt = ogtt[ogtt$Visit == "Baseline",]
# Merge
df = left_join(subject,cgm,by = c("TESS.ID" = "cgm_tess_id"))
```

# Participant Characteristics by FDR Status

```{r results='asis'}
t1 = tableby(FDR ~ Age + BMIz,data = subject)
summary(t1)
```
